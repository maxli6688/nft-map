(function(L,O){typeof exports=="object"&&typeof module!="undefined"?O(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],O):(L=typeof globalThis!="undefined"?globalThis:L||self,O(L.KvmTileMap={},L.React))})(this,(function(L,O){"use strict";var xn=Object.defineProperty,_n=Object.defineProperties;var Rn=Object.getOwnPropertyDescriptors;var kt=Object.getOwnPropertySymbols;var Cn=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable;var tt=(L,O,Z)=>O in L?xn(L,O,{enumerable:!0,configurable:!0,writable:!0,value:Z}):L[O]=Z,he=(L,O)=>{for(var Z in O||(O={}))Cn.call(O,Z)&&tt(L,Z,O[Z]);if(kt)for(var Z of kt(O))Sn.call(O,Z)&&tt(L,Z,O[Z]);return L},de=(L,O)=>_n(L,Rn(O));var x=(L,O,Z)=>tt(L,typeof O!="symbol"?O+"":O,Z);function Z(c){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(c){for(const n in c)if(n!=="default"){const i=Object.getOwnPropertyDescriptor(c,n);Object.defineProperty(f,n,i.get?i:{enumerable:!0,get:()=>c[n]})}}return f.default=c,Object.freeze(f)}const nt=Z(O);function De(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var ke={exports:{}},Re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt;function zt(){if(rt)return Re;rt=1;var c=O,f=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function t(s,a,h){var l,v={},m=null,_=null;h!==void 0&&(m=""+h),a.key!==void 0&&(m=""+a.key),a.ref!==void 0&&(_=a.ref);for(l in a)i.call(a,l)&&!r.hasOwnProperty(l)&&(v[l]=a[l]);if(s&&s.defaultProps)for(l in a=s.defaultProps,a)v[l]===void 0&&(v[l]=a[l]);return{$$typeof:f,type:s,key:m,ref:_,props:v,_owner:o.current}}return Re.Fragment=n,Re.jsx=t,Re.jsxs=t,Re}var Ce={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function jt(){return it||(it=1,process.env.NODE_ENV!=="production"&&(function(){var c=O,f=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),R=Symbol.iterator,k="@@iterator";function F(e){if(e===null||typeof e!="object")return null;var u=R&&e[R]||e[k];return typeof u=="function"?u:null}var S=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y(e){{for(var u=arguments.length,d=new Array(u>1?u-1:0),g=1;g<u;g++)d[g-1]=arguments[g];X("error",e,d)}}function X(e,u,d){{var g=S.ReactDebugCurrentFrame,M=g.getStackAddendum();M!==""&&(u+="%s",d=d.concat([M]));var P=d.map(function(C){return String(C)});P.unshift("Warning: "+u),Function.prototype.apply.call(console[e],console,P)}}var D=!1,T=!1,b=!1,z=!1,Y=!1,A;A=Symbol.for("react.module.reference");function K(e){return!!(typeof e=="string"||typeof e=="function"||e===i||e===r||Y||e===o||e===h||e===l||z||e===_||D||T||b||typeof e=="object"&&e!==null&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===t||e.$$typeof===s||e.$$typeof===a||e.$$typeof===A||e.getModuleId!==void 0))}function q(e,u,d){var g=e.displayName;if(g)return g;var M=u.displayName||u.name||"";return M!==""?d+"("+M+")":d}function $(e){return e.displayName||"Context"}function W(e){if(e==null)return null;if(typeof e.tag=="number"&&y("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case i:return"Fragment";case n:return"Portal";case r:return"Profiler";case o:return"StrictMode";case h:return"Suspense";case l:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s:var u=e;return $(u)+".Consumer";case t:var d=e;return $(d._context)+".Provider";case a:return q(e,e.render,"ForwardRef");case v:var g=e.displayName||null;return g!==null?g:W(e.type)||"Memo";case m:{var M=e,P=M._payload,C=M._init;try{return W(C(P))}catch(E){return null}}}return null}var U=Object.assign,ne=0,ce,ve,G,Q,V,B,pe;function me(){}me.__reactDisabledLog=!0;function se(){{if(ne===0){ce=console.log,ve=console.info,G=console.warn,Q=console.error,V=console.group,B=console.groupCollapsed,pe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:me,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}ne++}}function Me(){{if(ne--,ne===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:U({},e,{value:ce}),info:U({},e,{value:ve}),warn:U({},e,{value:G}),error:U({},e,{value:Q}),group:U({},e,{value:V}),groupCollapsed:U({},e,{value:B}),groupEnd:U({},e,{value:pe})})}ne<0&&y("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var oe=S.ReactCurrentDispatcher,ee;function re(e,u,d){{if(ee===void 0)try{throw Error()}catch(M){var g=M.stack.trim().match(/\n( *(at )?)/);ee=g&&g[1]||""}return`
`+ee+e}}var Pe=!1,ae;{var Le=typeof WeakMap=="function"?WeakMap:Map;ae=new Le}function le(e,u){if(!e||Pe)return"";{var d=ae.get(e);if(d!==void 0)return d}var g;Pe=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var P;P=oe.current,oe.current=null,se();try{if(u){var C=function(){throw Error()};if(Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(J){g=J}Reflect.construct(e,[],C)}else{try{C.call()}catch(J){g=J}e.call(C.prototype)}}else{try{throw Error()}catch(J){g=J}e()}}catch(J){if(J&&g&&typeof J.stack=="string"){for(var E=J.stack.split(`
`),H=g.stack.split(`
`),I=E.length-1,N=H.length-1;I>=1&&N>=0&&E[I]!==H[N];)N--;for(;I>=1&&N>=0;I--,N--)if(E[I]!==H[N]){if(I!==1||N!==1)do if(I--,N--,N<0||E[I]!==H[N]){var te=`
`+E[I].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),typeof e=="function"&&ae.set(e,te),te}while(I>=1&&N>=0);break}}}finally{Pe=!1,oe.current=P,Me(),Error.prepareStackTrace=M}var _e=e?e.displayName||e.name:"",fe=_e?re(_e):"";return typeof e=="function"&&ae.set(e,fe),fe}function ge(e,u,d){return le(e,!1)}function ye(e){var u=e.prototype;return!!(u&&u.isReactComponent)}function ue(e,u,d){if(e==null)return"";if(typeof e=="function")return le(e,ye(e));if(typeof e=="string")return re(e);switch(e){case h:return re("Suspense");case l:return re("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case a:return ge(e.render);case v:return ue(e.type,u,d);case m:{var g=e,M=g._payload,P=g._init;try{return ue(P(M),u,d)}catch(C){}}}return""}var ie=Object.prototype.hasOwnProperty,je={},Oe=S.ReactDebugCurrentFrame;function we(e){if(e){var u=e._owner,d=ue(e.type,e._source,u?u.type:null);Oe.setExtraStackFrame(d)}else Oe.setExtraStackFrame(null)}function Ee(e,u,d,g,M){{var P=Function.call.bind(ie);for(var C in e)if(P(e,C)){var E=void 0;try{if(typeof e[C]!="function"){var H=Error((g||"React class")+": "+d+" type `"+C+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[C]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw H.name="Invariant Violation",H}E=e[C](u,C,g,d,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(I){E=I}E&&!(E instanceof Error)&&(we(M),y("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",g||"React class",d,C,typeof E),we(null)),E instanceof Error&&!(E.message in je)&&(je[E.message]=!0,we(M),y("Failed %s type: %s",d,E.message),we(null))}}}var Je=Array.isArray;function be(e){return Je(e)}function p(e){{var u=typeof Symbol=="function"&&Symbol.toStringTag,d=u&&e[Symbol.toStringTag]||e.constructor.name||"Object";return d}}function w(e){try{return j(e),!1}catch(u){return!0}}function j(e){return""+e}function Ye(e){if(w(e))return y("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",p(e)),j(e)}var Ae=S.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0},Ie,Ct;function sn(e){if(ie.call(e,"ref")){var u=Object.getOwnPropertyDescriptor(e,"ref").get;if(u&&u.isReactWarning)return!1}return e.ref!==void 0}function on(e){if(ie.call(e,"key")){var u=Object.getOwnPropertyDescriptor(e,"key").get;if(u&&u.isReactWarning)return!1}return e.key!==void 0}function an(e,u){typeof e.ref=="string"&&Ae.current}function un(e,u){{var d=function(){Ie||(Ie=!0,y("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",u))};d.isReactWarning=!0,Object.defineProperty(e,"key",{get:d,configurable:!0})}}function cn(e,u){{var d=function(){Ct||(Ct=!0,y("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",u))};d.isReactWarning=!0,Object.defineProperty(e,"ref",{get:d,configurable:!0})}}var ln=function(e,u,d,g,M,P,C){var E={$$typeof:f,type:e,key:u,ref:d,props:C,_owner:P};return E._store={},Object.defineProperty(E._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(E,"_self",{configurable:!1,enumerable:!1,writable:!1,value:g}),Object.defineProperty(E,"_source",{configurable:!1,enumerable:!1,writable:!1,value:M}),Object.freeze&&(Object.freeze(E.props),Object.freeze(E)),E};function fn(e,u,d,g,M){{var P,C={},E=null,H=null;d!==void 0&&(Ye(d),E=""+d),on(u)&&(Ye(u.key),E=""+u.key),sn(u)&&(H=u.ref,an(u,M));for(P in u)ie.call(u,P)&&!Xe.hasOwnProperty(P)&&(C[P]=u[P]);if(e&&e.defaultProps){var I=e.defaultProps;for(P in I)C[P]===void 0&&(C[P]=I[P])}if(E||H){var N=typeof e=="function"?e.displayName||e.name||"Unknown":e;E&&un(C,N),H&&cn(C,N)}return ln(e,E,H,M,g,Ae.current,C)}}var Ke=S.ReactCurrentOwner,St=S.ReactDebugCurrentFrame;function xe(e){if(e){var u=e._owner,d=ue(e.type,e._source,u?u.type:null);St.setExtraStackFrame(d)}else St.setExtraStackFrame(null)}var Ge;Ge=!1;function Qe(e){return typeof e=="object"&&e!==null&&e.$$typeof===f}function Tt(){{if(Ke.current){var e=W(Ke.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function hn(e){return""}var Mt={};function dn(e){{var u=Tt();if(!u){var d=typeof e=="string"?e:e.displayName||e.name;d&&(u=`

Check the top-level render call using <`+d+">.")}return u}}function Pt(e,u){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var d=dn(u);if(Mt[d])return;Mt[d]=!0;var g="";e&&e._owner&&e._owner!==Ke.current&&(g=" It was passed a child from "+W(e._owner.type)+"."),xe(e),y('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',d,g),xe(null)}}function Lt(e,u){{if(typeof e!="object")return;if(be(e))for(var d=0;d<e.length;d++){var g=e[d];Qe(g)&&Pt(g,u)}else if(Qe(e))e._store&&(e._store.validated=!0);else if(e){var M=F(e);if(typeof M=="function"&&M!==e.entries)for(var P=M.call(e),C;!(C=P.next()).done;)Qe(C.value)&&Pt(C.value,u)}}}function vn(e){{var u=e.type;if(u==null||typeof u=="string")return;var d;if(typeof u=="function")d=u.propTypes;else if(typeof u=="object"&&(u.$$typeof===a||u.$$typeof===v))d=u.propTypes;else return;if(d){var g=W(u);Ee(d,e.props,"prop",g,e)}else if(u.PropTypes!==void 0&&!Ge){Ge=!0;var M=W(u);y("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",M||"Unknown")}typeof u.getDefaultProps=="function"&&!u.getDefaultProps.isReactClassApproved&&y("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function pn(e){{for(var u=Object.keys(e.props),d=0;d<u.length;d++){var g=u[d];if(g!=="children"&&g!=="key"){xe(e),y("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",g),xe(null);break}}e.ref!==null&&(xe(e),y("Invalid attribute `ref` supplied to `React.Fragment`."),xe(null))}}var Ot={};function Dt(e,u,d,g,M,P){{var C=K(e);if(!C){var E="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(E+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var H=hn();H?E+=H:E+=Tt();var I;e===null?I="null":be(e)?I="array":e!==void 0&&e.$$typeof===f?(I="<"+(W(e.type)||"Unknown")+" />",E=" Did you accidentally export a JSX literal instead of a component?"):I=typeof e,y("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",I,E)}var N=fn(e,u,d,M,P);if(N==null)return N;if(C){var te=u.children;if(te!==void 0)if(g)if(be(te)){for(var _e=0;_e<te.length;_e++)Lt(te[_e],e);Object.freeze&&Object.freeze(te)}else y("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Lt(te,e)}if(ie.call(u,"key")){var fe=W(e),J=Object.keys(u).filter(function(bn){return bn!=="key"}),et=J.length>0?"{key: someKey, "+J.join(": ..., ")+": ...}":"{key: someKey}";if(!Ot[fe+et]){var En=J.length>0?"{"+J.join(": ..., ")+": ...}":"{}";y(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,et,fe,En,fe),Ot[fe+et]=!0}}return e===i?pn(N):vn(N),N}}function mn(e,u,d){return Dt(e,u,d,!0)}function gn(e,u,d){return Dt(e,u,d,!1)}var yn=gn,wn=mn;Ce.Fragment=i,Ce.jsx=yn,Ce.jsxs=wn})()),Ce}var st;function Yt(){return st||(st=1,process.env.NODE_ENV==="production"?ke.exports=zt():ke.exports=jt()),ke.exports}var Se=Yt();const ot=(c,f)=>{let n=null;return(...i)=>{n!=null&&clearTimeout(n),n=setTimeout(()=>c(...i),f)}},Fe=(c,f=50)=>{let n=0;return(...i)=>{let o=+new Date;o-n>f&&(n=o,c.apply(void 0,i))}};var Te={exports:{}},At=Te.exports,at;function Xt(){return at||(at=1,(function(c,f){(function(n,i){i(f,c)})(At,function(n,i){function o(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}var r=.3,t=.04,s=.11;window.addEventListener("touchmove",function(){});var a=function v(m){var _=m.source,R=_===void 0?document:_,k=m.update,F=m.multiplier,S=F===void 0?1:F,y=m.friction,X=y===void 0?.92:y,D=m.initialValues,T=m.boundX,b=m.boundY,z=m.bounce,Y=z===void 0?!0:z;o(this,v);var A,K,q,$,W,U,ne,ce,ve,G,Q,V=0,B=0,pe=r*S,me=!1,se=!1,Me=!1,oe=!1,ee=[];(function(){if(R=typeof R=="string"?document.querySelector(R):R,!R)throw new Error("IMPETUS: source not found.");if(!k)throw new Error("IMPETUS: update function not defined.");D&&(D[0]&&(V=D[0]),D[1]&&(B=D[1]),ae()),T&&(A=T[0],K=T[1]),b&&(q=b[0],$=b[1]),R.addEventListener("touchstart",le),R.addEventListener("mousedown",le)})(),this.destroy=function(){return R.removeEventListener("touchstart",le),R.removeEventListener("mousedown",le),re(),null},this.pause=function(){re(),se=!1,Me=!0},this.resume=function(){Me=!1},this.setValues=function(p,w){typeof p=="number"&&(V=p),typeof w=="number"&&(B=w)},this.setMultiplier=function(p){S=p,pe=r*S},this.setBoundX=function(p){A=p[0],K=p[1]},this.setBoundY=function(p){q=p[0],$=p[1]};function re(){document.removeEventListener("touchmove",ge,l()?{passive:!1}:!1),document.removeEventListener("touchend",ye),document.removeEventListener("touchcancel",ue),document.removeEventListener("mousemove",ge,l()?{passive:!1}:!1),document.removeEventListener("mouseup",ye)}function Pe(){re(),document.addEventListener("touchmove",ge,l()?{passive:!1}:!1),document.addEventListener("touchend",ye),document.addEventListener("touchcancel",ue),document.addEventListener("mousemove",ge,l()?{passive:!1}:!1),document.addEventListener("mouseup",ye)}function ae(){k.call(R,V,B)}function Le(p){if(p.type==="touchmove"||p.type==="touchstart"||p.type==="touchend"){var w=p.targetTouches[0]||p.changedTouches[0];return{x:w.clientX,y:w.clientY,id:w.identifier}}else return{x:p.clientX,y:p.clientY,id:null}}function le(p){var w=Le(p);!se&&!Me&&(se=!0,oe=!1,ve=w.id,W=ne=w.x,U=ce=w.y,ee=[],ie(W,U),Pe())}function ge(p){p.preventDefault();var w=Le(p);se&&w.id===ve&&(ne=w.x,ce=w.y,ie(W,U),we())}function ye(p){var w=Le(p);se&&w.id===ve&&ue()}function ue(){se=!1,ie(W,U),Je(),re()}function ie(p,w){for(var j=Date.now();ee.length>0&&!(j-ee[0].time<=100);)ee.shift();ee.push({x:p,y:w,time:j})}function je(){var p=ne-W,w=ce-U;if(V+=p*S,B+=w*S,Y){var j=Ee();j.x!==0&&(V-=p*Oe(j.x)*S),j.y!==0&&(B-=w*Oe(j.y)*S)}else Ee(!0);ae(),W=ne,U=ce,me=!1}function Oe(p){return 5e-6*Math.pow(p,2)+1e-4*p+.55}function we(){me||h(je),me=!0}function Ee(p){var w=0,j=0;return A!==void 0&&V<A?w=A-V:K!==void 0&&V>K&&(w=K-V),q!==void 0&&B<q?j=q-B:$!==void 0&&B>$&&(j=$-B),p&&(w!==0&&(V=w>0?A:K),j!==0&&(B=j>0?q:$)),{x:w,y:j,inBounds:w===0&&j===0}}function Je(){var p=ee[0],w=ee[ee.length-1],j=w.x-p.x,Ye=w.y-p.y,Ae=w.time-p.time,Xe=Ae/15/S;G=j/Xe||0,Q=Ye/Xe||0;var Ie=Ee();(Math.abs(G)>1||Math.abs(Q)>1||!Ie.inBounds)&&(oe=!0,h(be))}function be(){if(oe){G*=X,Q*=X,V+=G,B+=Q;var p=Ee();if(Math.abs(G)>pe||Math.abs(Q)>pe||!p.inBounds){if(Y){var w=2.5;if(p.x!==0)if(p.x*G<=0)G+=p.x*t;else{var j=p.x>0?w:-w;G=(p.x+j)*s}if(p.y!==0)if(p.y*Q<=0)Q+=p.y*t;else{var j=p.y>0?w:-w;Q=(p.y+j)*s}}else p.x!==0&&(p.x>0?V=A:V=K,G=0),p.y!==0&&(p.y>0?B=q:B=$,Q=0);ae(),h(be)}else oe=!1}}};i.exports=a;var h=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(v){window.setTimeout(v,1e3/60)}})();function l(){var v=!1;try{var m=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,m)}catch(_){}return l=function(){return v},v}})})(Te,Te.exports)),Te.exports}var It=Xt();const Ft=De(It);var Ue,ut;function Ut(){return ut||(ut=1,Ue=function(f,n){n||(n=[0,""]),f=String(f);var i=parseFloat(f,10);return n[0]=i,n[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}),Ue}var Ne,ct;function Nt(){if(ct)return Ne;ct=1;var c=Ut();Ne=o;var f=i("in",document.body);function n(r,t){var s=c(getComputedStyle(r).getPropertyValue(t));return s[0]*o(s[1],r)}function i(r,t){var s=document.createElement("div");s.style.height="128"+r,t.appendChild(s);var a=n(s,"height")/128;return t.removeChild(s),a}function o(r,t){if(!r)return null;switch(t=t||document.body,r=(r+""||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),r){case"%":return t.clientHeight/100;case"ch":case"ex":return i(r,t);case"em":return n(t,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return f;case"cm":return f/2.54;case"mm":return f/25.4;case"pt":return f/72;case"pc":return f/6;case"px":return 1}var s=c(r);if(!isNaN(s[0])&&s[1]){var a=o(s[1],t);return typeof a=="number"?s[0]*a:null}return null}return Ne}var We,lt;function Wt(){if(lt)return We;lt=1;var c=Nt();We=f;function f(n,i,o){typeof n=="function"&&(o=!!i,i=n,n=window);var r=c("ex",n),t=function(s){o&&s.preventDefault();var a=s.deltaX||0,h=s.deltaY||0,l=s.deltaZ||0,v=s.deltaMode,m=1;switch(v){case 1:m=r;break;case 2:m=window.innerHeight;break}if(a*=m,h*=m,l*=m,a||h||l)return i(a,h,l,s)};return n.addEventListener("wheel",t),t}return We}var qt=Wt();const $t=De(qt);var qe,ft;function Vt(){if(ft)return qe;ft=1,qe=c;function c(f,n){var i=n[0]-f[0],o=n[1]-f[1];return Math.sqrt(i*i+o*o)}return qe}var $e,ht;function dt(){if(ht)return $e;ht=1;function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}$e=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(r){if(!n(r)||r<0||isNaN(r))throw TypeError("n must be a positive number");return this._maxListeners=r,this},c.prototype.emit=function(r){var t,s,a,h,l,v;if(this._events||(this._events={}),r==="error"&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var m=new Error('Uncaught, unspecified "error" event. ('+t+")");throw m.context=t,m}if(s=this._events[r],o(s))return!1;if(f(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),s.apply(this,h)}else if(i(s))for(h=Array.prototype.slice.call(arguments,1),v=s.slice(),a=v.length,l=0;l<a;l++)v[l].apply(this,h);return!0},c.prototype.addListener=function(r,t){var s;if(!f(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",r,f(t.listener)?t.listener:t),this._events[r]?i(this._events[r])?this._events[r].push(t):this._events[r]=[this._events[r],t]:this._events[r]=t,i(this._events[r])&&!this._events[r].warned&&(o(this._maxListeners)?s=c.defaultMaxListeners:s=this._maxListeners,s&&s>0&&this._events[r].length>s&&(this._events[r].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[r].length),typeof console.trace=="function"&&console.trace())),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(r,t){if(!f(t))throw TypeError("listener must be a function");var s=!1;function a(){this.removeListener(r,a),s||(s=!0,t.apply(this,arguments))}return a.listener=t,this.on(r,a),this},c.prototype.removeListener=function(r,t){var s,a,h,l;if(!f(t))throw TypeError("listener must be a function");if(!this._events||!this._events[r])return this;if(s=this._events[r],h=s.length,a=-1,s===t||f(s.listener)&&s.listener===t)delete this._events[r],this._events.removeListener&&this.emit("removeListener",r,t);else if(i(s)){for(l=h;l-- >0;)if(s[l]===t||s[l].listener&&s[l].listener===t){a=l;break}if(a<0)return this;s.length===1?(s.length=0,delete this._events[r]):s.splice(a,1),this._events.removeListener&&this.emit("removeListener",r,t)}return this},c.prototype.removeAllListeners=function(r){var t,s;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[r]&&delete this._events[r],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[r],f(s))this.removeListener(r,s);else if(s)for(;s.length;)this.removeListener(r,s[s.length-1]);return delete this._events[r],this},c.prototype.listeners=function(r){var t;return!this._events||!this._events[r]?t=[]:f(this._events[r])?t=[this._events[r]]:t=this._events[r].slice(),t},c.prototype.listenerCount=function(r){if(this._events){var t=this._events[r];if(f(t))return 1;if(t)return t.length}return 0},c.listenerCount=function(r,t){return r.listenerCount(t)};function f(r){return typeof r=="function"}function n(r){return typeof r=="number"}function i(r){return typeof r=="object"&&r!==null}function o(r){return r===void 0}return $e}var Ve,vt;function Bt(){if(vt)return Ve;vt=1,Ve=c;function c(f,n){return{configurable:!0,enumerable:!0,get:f,set:n}}return Ve}var Be,pt;function mt(){if(pt)return Be;pt=1;var c={left:0,top:0};Be=f;function f(i,o,r){o=o||i.currentTarget||i.srcElement,Array.isArray(r)||(r=[0,0]);var t=i.clientX||0,s=i.clientY||0,a=n(o);return r[0]=t-a.left,r[1]=s-a.top,r}function n(i){return i===window||i===document||i===document.body?c:i.getBoundingClientRect()}return Be}var He,gt;function Ht(){if(gt)return He;gt=1;var c=Vt(),f=dt().EventEmitter,n=Bt(),i=mt();He=o;function o(t){t=t||window;var s=new f,a=[null,null],h=0,l=0,v=!1,m=!1;return Object.defineProperties(s,{pinching:n(function(){return h===2}),fingers:n(function(){return a})}),R(),s.enable=R,s.disable=k,s.indexOfTouch=_,s;function _(D){for(var T=D.identifier,b=0;b<a.length;b++)if(a[b]&&a[b].touch&&a[b].touch.identifier===T)return b;return-1}function R(){m||(m=!0,t.addEventListener("touchstart",F,!1),t.addEventListener("touchmove",S,!1),t.addEventListener("touchend",y,!1),t.addEventListener("touchcancel",y,!1))}function k(){m&&(m=!1,h=0,a[0]=null,a[1]=null,l=0,v=!1,t.removeEventListener("touchstart",F,!1),t.removeEventListener("touchmove",S,!1),t.removeEventListener("touchend",y,!1),t.removeEventListener("touchcancel",y,!1))}function F(D){for(var T=0;T<D.changedTouches.length;T++){var b=D.changedTouches[T],z=b.identifier,Y=_(z);if(Y===-1&&h<2){var A=h===0,K=a[0]?1:0,q=a[0]?0:1,$=new r;a[K]=$,h++,$.touch=b,i(b,t,$.position);var W=a[q]?a[q].touch:void 0;if(s.emit("place",b,W),!A){var U=X();v=!1,s.emit("start",U),l=U}}}}function S(D){for(var T=!1,b=0;b<D.changedTouches.length;b++){var z=D.changedTouches[b],Y=_(z);Y!==-1&&(T=!0,a[Y].touch=z,i(z,t,a[Y].position))}if(h===2&&T){var A=X();s.emit("change",A,l),l=A}}function y(D){for(var T=0;T<D.changedTouches.length;T++){var b=D.changedTouches[T],z=_(b);if(z!==-1){a[z]=null,h--;var Y=z===0?1:0,A=a[Y]?a[Y].touch:void 0;s.emit("lift",b,A)}}!v&&h!==2&&(v=!0,s.emit("end"))}function X(){return h<2?0:c(a[0].position,a[1].position)}}function r(){this.position=[0,0],this.touch=null}return He}var Zt=Ht();const Jt=De(Zt);var ze={exports:{}},yt;function Kt(){if(yt)return ze.exports;yt=1;var c=mt(),f=dt().EventEmitter;function n(i){i=i||{};var o=i.element||window,r=new f,t=i.position||[0,0];return i.touchstart!==!1&&(o.addEventListener("mousedown",a,!1),o.addEventListener("touchstart",s,!1)),o.addEventListener("mousemove",a,!1),o.addEventListener("touchmove",s,!1),r.position=t,r.dispose=h,r;function s(l){var v=l.targetTouches[0];a(v)}function a(l){c(l,o,t),r.emit("move",l)}function h(){o.removeEventListener("mousemove",a,!1),o.removeEventListener("mousedown",a,!1),o.removeEventListener("touchmove",s,!1),o.removeEventListener("touchstart",s,!1)}}return ze.exports=function(i){return n(i).position},ze.exports.emitter=function(i){return n(i)},ze.exports}var Gt=Kt();const Qt=De(Gt);function en(c,f){const n=Qt.emitter({element:c});let i=0,o=0,r=!0;const t=()=>r=!0;c.addEventListener("mousedown",t),c.addEventListener("touchstart",t);let s=0,a=0;const h=new Ft({source:c,update:(R,k)=>{r&&(r=!1,i=n[0],o=n[1]);const F={target:c,type:"mouse",dx:R-a,dy:k-s,dz:0,x:n[0],y:n[1],x0:i,y0:o};a=R,s=k,f(F)},multiplier:1,friction:.75}),l=$t(c,(R,k,F,S)=>{S.preventDefault(),f({target:c,type:"mouse",dx:0,dy:0,dz:k,x:n[0],y:n[1],x0:n[0],y0:n[1]})}),v=Jt(c),m=2;let _=null;return v.on("start",R=>{const[k,F]=v.fingers;console.log(R),_=[F.position[0]*.5+k.position[0]*.5,F.position[1]*.5+k.position[1]*.5],h&&h.pause()}),v.on("end",()=>{_&&(_=null,h&&h.resume())}),v.on("change",(R,k)=>{console.log(R,k),!(!v.pinching||!_)&&f({target:c,type:"touch",dx:0,dy:0,dz:-(R-k)*m,x:_[0],y:_[1],x0:_[0],y0:_[0]})}),function(){h.destroy(),n.dispose(),v.removeAllListeners(),c.removeEventListener("wheel",l),c.removeEventListener("mousedown",t),c.removeEventListener("touchstart",t)}}function wt(c){const{width:f,height:n,center:i,pan:o,size:r,padding:t}=c,s={width:Math.ceil(f/r+t),height:Math.ceil(n/r+t)},a=o?Math.ceil(o.x/r):0,h=o?Math.ceil(o.y/r):0,l={x:i.x-Math.ceil(s.width/2)+a,y:i.y+Math.ceil(s.height/2)-h},v={x:i.x+Math.ceil(s.width/2)+a,y:i.y-Math.ceil(s.height/2)-h},m=(v.x-l.x)*(l.y-v.y);return de(he({},s),{nw:l,se:v,area:m})}function Et(c){const{ctx:f,x:n,y:i,size:o,padding:r,border:t,color:s,image:a,left:h,top:l,right:v,bottom:m,scale:_,coords:R,parcels:k}=c,{codx:F,cody:S}=c,y=_?o*_:o,X=r/2,D=y>80?.6:.5;let T=n-y+X,b=i-y+X,z=y-r,Y=y-r;l&&(b-=X,Y+=X),h&&(T-=X,z+=X),v&&(z+=X+D),m&&(Y+=X),t?(f.strokeStyle=t,f.lineWidth=r,f.strokeRect(T,b,z,Y)):a&&y>30?f.drawImage(a,T,b,z,Y):(s&&(f.fillStyle=s),f.fillRect(T,b,z,Y));const A=new Path2D;A.rect(T,b,z,Y),R.push(`${F},${S}`),k.push(A),y>70&&c.showCoord&&(f.fillStyle="#fff",f.fillText(`${F},${S}`,n-50,i-50))}function Ze(c){const{ctx:f,width:n,height:i,size:o,pan:r,nw:t,se:s,center:a,layers:h,parcels:l,coords:v}=c;let m=n/2,_=i/2,R=o/16*.8;c.isLite?(m=n/2,_=i/2,R=o<7?.1:1,f.fillStyle=o<=4?"#fff":"#000",f.fillRect(0,0,n,i)):f.clearRect(0,0,n,i);const k=(s.x-t.x)*(t.y-s.y);console.log("total",k),console.time("rendermap");for(const F of h)for(let S=t.x;S<s.x;S+=1)for(let y=s.y;y<t.y;y++){const X=(a.x-S)*o+(r?r.x:0),D=(y-a.y)*o+(r?r.y:0),T=F(S,y);if(!T)continue;const{color:b,top:z,left:Y,right:A,bottom:K,scale:q,image:$,border:W}=T,U=q?o*q/2:o/2;Et({ctx:f,x:m-X+U,y:_-D+U,codx:S,cody:y,size:o,padding:R,color:b,border:W,image:$,left:Y,top:z,right:A,bottom:K,scale:q,showCoord:c.showCoord,coords:v,parcels:l})}console.timeEnd("rendermap")}const tn=768,bt=500;class xt extends nt.PureComponent{constructor(n){super(n);x(this,"oldState");x(this,"canvas");x(this,"mounted");x(this,"isMapMove");x(this,"showCoord");x(this,"hover");x(this,"mouse");x(this,"mouseDownPos");x(this,"popupTimeout");x(this,"mousedownTimestamp");x(this,"coords");x(this,"parcels");x(this,"destroy");x(this,"debouncedRenderMap",ot(this.renderMap.bind(this),12));x(this,"debouncedUpdateCenter",Fe(this.updateCenter.bind(this),0));x(this,"debouncedHandleChange",Fe(this.handleChange.bind(this),0));x(this,"handlePanZoom",n=>{if(!this.props.isDraggable)return;const{dx:i,dy:o,dz:r}=n,{size:t,maxSize:s,minSize:a,minX:h,maxX:l,minY:v,maxY:m,padding:_}=this.props,{pan:R,zoom:k}=this.state,F=s/t,S=a/t,y={x:R.x-i,y:R.y-o},X=Math.max(S,Math.min(F,k-r*this.getDzZoomModifier())),D=X*t,T=(this.state.width-_)/2,b=(this.state.height-_)/2;this.state.center.x-T,this.state.center.y+b,this.state.center.x+T,this.state.center.y-b,this.setState({pan:y,zoom:X,size:D},()=>{this.renderMap(),(i!==0||o!==0)&&this.debouncedUpdateCenter()})});x(this,"handleClick",n=>{if(this.mouseDownPos){const o=Math.abs(n.offsetX-this.mouseDownPos.x),r=Math.abs(n.offsetY-this.mouseDownPos.y);if(o>5||r>5){console.log("🚫 Drag detected, ignoring click");return}}let i;if(this.canvas){const o=this.canvas.getContext("2d");let r;for(let t=0;t<this.parcels.length;t++)r=this.parcels[t],o.isPointInPath(r,n.offsetX,n.offsetY)&&(i=this.coords[t].split(","),console.log("✅ Found parcel:",i))}if(i){const o=Number(i[0]),r=Number(i[1]),{onClick:t,onMouseUp:s}=this.props;console.log("🎯 Calling onClick/onMouseUp for:",o,r),t&&(t(o,r),this.renderMap()),s&&(s(o,r),this.renderMap())}});x(this,"handleMouseUp",n=>{this.isMapMove=!1});x(this,"handleMouseDown",n=>{this.mouseDownPos={x:n.offsetX,y:n.offsetY}});x(this,"handleMouseMove",n=>{let i;if(this.canvas){const o=this.canvas.getContext("2d");let r;for(let t=0;t<this.parcels.length;t++)r=this.parcels[t],o.isPointInPath(r,n.offsetX,n.offsetY)&&(i=this.coords[t].split(","))}if(i){const o=Number(i[0]),r=Number(i[1]);if(this.inBounds(o,r))this.props.onPopup&&this.props.onPopup({x:o,y:r,top:n.offsetY,left:n.offsetX,visible:!0});else{this.hidePopup();return}(!this.hover||this.hover.x!==o||this.hover.y!==r)&&(this.hover={x:o,y:r})}});x(this,"handleMouseOut",()=>{this.hidePopup()});x(this,"refCanvas",n=>{this.canvas=n});x(this,"handleTarget",()=>{const{x:n,y:i}=this.props;this.setState({center:{x:n,y:i}})});const{x:i,y:o,initialX:r,initialY:t,size:s,zoom:a,panX:h,panY:l}=n,v={pan:{x:h,y:l},center:{x:i==null?r:i,y:o==null?t:o},size:a*s,zoom:a,popup:null};this.state=this.generateState(n,v),this.oldState=this.state,this.hover=null,this.isMapMove=!1,this.mouse=null,this.mouseDownPos=null,this.mounted=!1,this.showCoord=!1,this.canvas=null,this.coords=[],this.parcels=[],this.popupTimeout=null}UNSAFE_componentWillUpdate(n,i){const{x:o,y:r}=this.props;(o!==n.x||r!==n.y)&&(n.x!==i.center.x||n.y!==i.center.y)&&(i=de(he({},i),{center:{x:n.x,y:n.y},pan:i.pan}));const t=this.generateState(n,i),s=t.width!==this.oldState.width||t.height!==this.oldState.height||t.nw.x!==this.oldState.nw.x||t.nw.y!==this.oldState.nw.y||t.se.x!==this.oldState.se.x||t.se.y!==this.oldState.se.y||t.zoom!==this.oldState.zoom;(n.x!==o||n.y!==r||!this.oldState||s)&&(this.oldState=t,this.setState(t,()=>{this.debouncedHandleChange()}))}UNSAFE_componentWillReceiveProps(n){const{zoom:i,maxSize:o,minSize:r,size:t}=n,s=o/t,a=r/t,h=Math.max(a,Math.min(s,i));h!==this.props.zoom&&h!==this.state.zoom&&this.setState({zoom:h,size:this.props.size*h})}componentDidUpdate(){this.debouncedRenderMap(),this.oldState=this.state}componentDidMount(){const{isDraggable:n}=this.props;localStorage&&(this.showCoord=localStorage.getItem("maxli")==="coord"),this.renderMap(),this.canvas&&(n&&(this.destroy=en(this.canvas,this.handlePanZoom)),this.canvas.addEventListener("click",this.handleClick),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("mouseout",this.handleMouseOut)),this.mounted=!0}getPng(){return this.canvas?this.canvas.toDataURL("image/png"):""}componentWillUnmount(){this.destroy&&this.destroy(),this.canvas&&(this.canvas.removeEventListener("click",this.handleClick),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("mouseout",this.handleMouseOut)),this.mounted=!1}generateState(n,i){const{width:o,height:r,padding:t}=n,{pan:s,zoom:a,center:h,size:l}=i,v=wt({width:o,height:r,center:h,pan:s,size:l,padding:t});return de(he({},v),{pan:s,zoom:a,center:h,size:l})}handleChange(){const{onChange:n}=this.props,{nw:i,se:o,center:r,zoom:t}=this.state;this.mounted&&n&&n({nw:i,se:o,center:r,zoom:t})}getCanvasImageData(n,i){return this.canvas?this.canvas.getContext("2d").getImageData(n,i,1,1).data.join(","):""}mouseToCoords(n,i){const{padding:o}=this.props,{size:r,pan:t,center:s,width:a,height:h}=this.state,l={x:(n+t.x)/r,y:(i+t.y)/r},v={x:(a-o-.5)/2-s.x,y:(h-o-.5)/2+s.y},m=Math.round(l.x-v.x),_=Math.round(v.y-l.y);return[m,_]}inBounds(n,i){const{minX:o,minY:r,maxX:t,maxY:s}=this.props;return n>=o&&n<=t&&i>=r&&i<=s}showPopup(n,i,o,r){const{onPopup:t,onHover:s}=this.props;t&&(this.hidePopup(),this.popupTimeout=+setTimeout(()=>{this.mounted&&this.setState({popup:{x:n,y:i,top:r,left:o,visible:!0}},()=>t(this.state.popup))},400)),s&&(s(n,i),this.renderMap())}hidePopup(){const{onPopup:n}=this.props;n&&(this.popupTimeout&&clearTimeout(this.popupTimeout),this.state.popup&&this.setState({popup:de(he({},this.state.popup),{visible:!1})},()=>{n(this.state.popup)}))}updateCenter(){const{pan:n,center:i,size:o}=this.state,r=n.x%o,t=n.y%o,s={x:r,y:t},a={x:i.x+Math.floor((n.x-r)/o),y:i.y-Math.floor((n.y-t)/o)};this.setState({pan:s,center:a})}renderMap(){if(!this.canvas)return;const{width:n,height:i,layers:o,renderMap:r}=this.props,{nw:t,se:s,pan:a,size:h,center:l}=this.state,v=this.canvas.getContext("2d");this.coords=[],this.parcels=[],r({ctx:v,width:n,height:i,size:h,pan:a,nw:t,se:s,center:l,coords:this.coords,showCoord:this.showCoord,parcels:this.parcels,layers:o})}getDz(){const{zoom:n}=this.state;return Math.sqrt(n)*(this.isMobile()?100:50)}getDzZoomModifier(){return this.isMobile(),.005}isMobile(){return this.props.width<tn}getCanvasClassName(){const{isDraggable:n,onClick:i}=this.props;let o="kvm-tile-map-canvas";return n&&(o+=" draggable"),i&&(o+=" clickable"),o}render(){const{width:n,height:i,className:o}=this.props,r={width:n,height:i},t=("kvm-tile-map "+o).trim();return Se.jsx("div",{className:t,style:r,children:Se.jsx("canvas",{className:this.getCanvasClassName(),width:n,height:i,ref:this.refCanvas})})}}x(xt,"defaultProps",{x:0,y:0,className:"",initialX:0,initialY:0,size:16,width:640,height:480,zoom:1,minSize:4,maxSize:40,minX:-250,maxX:bt/2,minY:-250,maxY:bt/2,panX:0,panY:0,padding:4,isDraggable:!0,renderMap:Ze});const nn=768,_t=100;class Rt extends nt.PureComponent{constructor(n){super(n);x(this,"oldState");x(this,"canvas");x(this,"showCoord");x(this,"coords");x(this,"parcels");x(this,"destroy");x(this,"refCanvas",n=>{this.canvas=n});x(this,"handleTarget",()=>{const{x:n,y:i}=this.props;this.setState({center:{x:n,y:i}})});const{x:i,y:o,initialX:r,initialY:t,size:s,zoom:a,panX:h,panY:l}=n,v={pan:{x:h,y:l},center:{x:i==null?r:i,y:o==null?t:o},size:a*s,zoom:a,popup:null};this.state=this.generateState(n,v),this.oldState=this.state,this.showCoord=!1,this.canvas=null,this.coords=[],this.parcels=[]}UNSAFE_componentWillUpdate(n,i){const{x:o,y:r}=this.props;(o!==n.x||r!==n.y)&&(n.x!==i.center.x||n.y!==i.center.y)&&(i=de(he({},i),{center:{x:n.x,y:n.y},pan:{x:0,y:0}}));const t=this.generateState(n,i),s=t.width!==this.oldState.width||t.height!==this.oldState.height||t.nw.x!==this.oldState.nw.x||t.nw.y!==this.oldState.nw.y||t.se.x!==this.oldState.se.x||t.se.y!==this.oldState.se.y||t.zoom!==this.oldState.zoom;(n.x!==o||n.y!==r||!this.oldState||s)&&(this.oldState=t,this.setState(t,()=>{}))}componentDidUpdate(){this.renderMap(),this.oldState=this.state}componentDidMount(){this.renderMap()}getPng(){return this.canvas?this.canvas.toDataURL("image/png"):""}componentWillUnmount(){this.destroy&&this.destroy()}generateState(n,i){const{width:o,height:r,padding:t}=n,{pan:s,zoom:a,center:h,size:l}=i,v=wt({width:o,height:r,center:h,pan:s,size:l,padding:t});return de(he({},v),{pan:s,zoom:a,center:h,size:l})}renderMap(){if(!this.canvas)return;const{width:n,height:i,layers:o,renderMap:r}=this.props,{nw:t,se:s,pan:a,size:h,center:l}=this.state,v=this.canvas.getContext("2d");this.coords=[],this.parcels=[],r({ctx:v,width:n,height:i,size:h,pan:a,nw:t,se:s,center:l,coords:this.coords,showCoord:this.showCoord,parcels:this.parcels,layers:o,isLite:!0});const{onRendered:m}=this.props;m&&m(this.getPng())}getDz(){const{zoom:n}=this.state;return Math.sqrt(n)*(this.isMobile()?100:50)}getDzZoomModifier(){return this.isMobile(),.005}isMobile(){return this.props.width<nn}getCanvasClassName(){const{isDraggable:n,onClick:i}=this.props;let o="kvm-tile-map-canvas";return n&&(o+=" draggable"),i&&(o+=" clickable"),o}render(){const{width:n,height:i,className:o}=this.props,r={width:n,height:i},t=("kvm-tile-map "+o).trim();return Se.jsx("div",{className:t,style:r,children:Se.jsx("canvas",{className:this.getCanvasClassName(),width:n,height:i,ref:this.refCanvas})})}}x(Rt,"defaultProps",{x:0,y:0,className:"",initialX:0,initialY:0,size:16,width:640,height:480,zoom:1,minSize:4,maxSize:40,minX:-50,maxX:_t/2,minY:-50,maxY:_t/2,panX:0,panY:0,padding:4,isDraggable:!0,renderMap:Ze});const rn=({children:c})=>Se.jsx("div",{children:c||"the snozzberries taste like snozzberries"});L.Thing=rn,L.TileMap=xt,L.TileMapLite=Rt,L.debounce=ot,L.renderMap=Ze,L.renderTile=Et,L.throttle=Fe,Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})}));
